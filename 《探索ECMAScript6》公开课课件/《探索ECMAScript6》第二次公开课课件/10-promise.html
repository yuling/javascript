<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<script type="text/javascript">
	"use strict"
	/*
		Promise.all方法用于将多个Promise实例，包装成一个新的Promise实例。。
		参数要求拥有iterator接口，并且每一项都是promise实例
		var p = Promise.all([p1,p2,p3])
		p的状态由p1、p2、p3决定，分成两种情况。
		（1）只有p1、p2、p3的状态都变成fulfilled，p的状态才会变成fulfilled，此时p1、p2、p3的返回值组成一个数组，传递给p的回调函数。
		（2）只要p1、p2、p3之中有一个被rejected，p的状态就变成rejected，此时第一个被reject的实例的返回值，会传递给p的回调函数。

		Promise.race
		与Promise.all方法类似将多个promise包装成一个新的promise实例
		但是其中有一项的状态发生改变新的实例的状态就会随着改变。

		var p = Promise.race([p1,p2,p3])
		p的状态由p1、p2、p3决定，分成两种情况。

		1、只要p1、p2、p3中一个的状态变成fulfilled，p的状态就变成fulfilled
		2、只要p1、p2、p3之中有一个被rejected，p的状态就变成rejected，此时第一个被reject的实例的返回值，会传递给p的回调函数。
	*/
	var p1 = new Promise(function(resolve,reject){
		setTimeout(function(){
			resolve();
			console.log('p1')
		}, 20)
	});
	var p2 = new Promise(function(resolve,reject){
		setTimeout(function(){
			reject();
			console.log('p2')
		}, 400)
	});
	var p3 = new Promise(function(resolve,reject){
		setTimeout(function(){
			resolve();
			console.log('p3')
		}, 1000)
	});

	var p4 = Promise.all([p1,p2,p3]);
	 p4.then(function(){
	 	console.log('成功');
	 }, function(){
	 	console.log('失败');
	 })
	</script>
</body>
</html>